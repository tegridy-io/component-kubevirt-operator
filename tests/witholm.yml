parameters:
  kapitan:
    dependencies:
      - type: https
        source: https://raw.githubusercontent.com/tegridy-io/component-olm/master/lib/olm.libsonnet
        output_path: vendor/lib/olm.libsonnet

  olm:
    namespace:
      manager:
        name: my-olm-namespace

  kubevirt_operator:
    olm:
      enabled: true

    config:
      kubevirt:
        imagePullPolicy: IfNotPresent
        infra:
          nodeSelector:
            kubernetes.io/os: linux
          tolerations:
            - key: CriticalAddonsOnly
              operator: Exists
        workload:
          nodeSelector:
            kubernetes.io/os: linux

      data_importer:
        config:
          featureGates:
            - HonorWaitForFirstConsumer
        imagePullPolicy: IfNotPresent
        infra:
          nodeSelector:
            kubernetes.io/os: linux
        workload:
          nodeSelector:
            kubernetes.io/os: linux

      network_addons:
        multus: {}
        multusDynamicNetworks: {}
        linuxBridge: {}

      hostpath_provisioner:
        storagePools:
          - name: "local"
            path: "/var/hpvolumes"

      tenant_quota:
        additionalMigrationResources:
          requests.cpu: 500m
          requests.memory: 512Mi

      schedule_scale:
        featureGates:
          deployTektonTaskResources: true
          deployVmConsoleProxy: true
